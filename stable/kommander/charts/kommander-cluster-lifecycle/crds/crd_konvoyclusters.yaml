
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    helm.sh/hook: crd-install
    controller-gen.kubebuilder.io/version: v0.2.4
  creationTimestamp: null
  name: konvoyclusters.kommander.mesosphere.io
spec:
  additionalPrinterColumns:
  - JSONPath: .metadata.annotations.kommander\.mesosphere\.io/display-name
    name: Display name
    type: string
  - JSONPath: .status.phase
    name: Status
    type: string
  - JSONPath: .spec.provisioner.provider
    name: Provider
    type: string
  - JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  group: kommander.mesosphere.io
  names:
    kind: KonvoyCluster
    listKind: KonvoyClusterList
    plural: konvoyclusters
    shortNames:
    - konvoy
    - konvoys
    singular: konvoycluster
  preserveUnknownFields: false
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: KonvoyCluster is the Schema for the Konvoy cluster kind
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: KonvoyClusterSpec defines the desired state of KonvoyCluster
          properties:
            cloudProviderAccountRef:
              description: LocalObjectReference contains enough information to let
                you locate the referenced object inside the same namespace.
              properties:
                name:
                  description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    TODO: Add other useful fields. apiVersion, kind, uid?'
                  type: string
              type: object
            cluster:
              description: ClusterConfigurationSpec is the spec that contains the
                Kubernetes cluster options
              properties:
                addons:
                  items:
                    properties:
                      addonsList:
                        description: AddonConfigs is a list of AddonConfig
                        items:
                          description: AddonConfig is a quick reference to an Addon
                          properties:
                            enabled:
                              type: boolean
                            name:
                              type: string
                            values:
                              type: string
                          required:
                          - enabled
                          - name
                          type: object
                        type: array
                      configRepository:
                        type: string
                      configVersion:
                        type: string
                      helmRepository:
                        properties:
                          image:
                            type: string
                        type: object
                    required:
                    - configRepository
                    type: object
                  type: array
                containerNetworking:
                  description: ContainerNetworking describes the CNI used by Kubernetes
                  properties:
                    calico:
                      description: CalicoContainerNetworking describes Calico CNI
                      properties:
                        encapsulation:
                          type: string
                        mtu:
                          format: int32
                          type: integer
                        version:
                          type: string
                      type: object
                  type: object
                containerRuntime:
                  description: ContainerRuntime describes the runtime used by the
                    Kubelet
                  properties:
                    containerd:
                      description: ContainerdContainerRuntime describes containerd
                        runtime options
                      properties:
                        configData:
                          description: ConfigData represents a file configuration
                            for a Konvoy cluster component, and whether or not that
                            should be merged into the corresponding data or completely
                            replace it.
                          properties:
                            data:
                              type: string
                            replace:
                              type: boolean
                          required:
                          - data
                          - replace
                          type: object
                        version:
                          type: string
                      type: object
                  type: object
                imageRegistries:
                  items:
                    description: ImageRegistry describes the docker image registries
                      that are automatically configured to be used by the ContainerRuntime
                    properties:
                      auth:
                        type: string
                      default:
                        type: boolean
                      identityToken:
                        type: string
                      password:
                        type: string
                      server:
                        type: string
                      username:
                        type: string
                    type: object
                  type: array
                kubernetes:
                  description: Kubernetes controls the options used by kubeadm and
                    at other points during installation
                  properties:
                    admissionPlugins:
                      properties:
                        disabled:
                          items:
                            type: string
                          type: array
                        enabled:
                          items:
                            type: string
                          type: array
                      type: object
                    cloudProvider:
                      description: CloudProvider describes the options passed to Kubernets
                        cloud-provider options
                      properties:
                        provider:
                          type: string
                      type: object
                    controlPlane:
                      description: ControlPlane contains all control plane related
                        configurations
                      properties:
                        certificate:
                          description: Certificate contains information about an X.509
                            certificate
                          properties:
                            subjectAlternativeNames:
                              items:
                                type: string
                              type: array
                          type: object
                        controlPlaneEndpointOverride:
                          type: string
                        keepalived:
                          description: Keepalived describes different keepalived related
                            options
                          properties:
                            interface:
                              type: string
                            vrid:
                              format: int32
                              type: integer
                          type: object
                      type: object
                    kubelet:
                      description: Kubelet describes the settings for the Kubelet.
                      properties:
                        cgroupRoot:
                          type: string
                      type: object
                    networking:
                      description: Networking describes different networking related
                        options
                      properties:
                        httpProxy:
                          type: string
                        httpsProxy:
                          type: string
                        noProxy:
                          items:
                            type: string
                          type: array
                        podSubnet:
                          type: string
                        serviceSubnet:
                          type: string
                      type: object
                    preflightChecks:
                      description: PreflightChecks describes the set of preflight
                        checks to be performed.
                      properties:
                        errorsToIgnore:
                          items:
                            type: string
                          type: array
                      type: object
                    version:
                      type: string
                  type: object
                nodePools:
                  items:
                    description: NodePool is an object that contains details of a
                      pool such as its name, taints and labels
                    properties:
                      gpu:
                        description: GPU represents an object that contains details
                          of user defined GPU info
                        properties:
                          nvidia:
                            description: Nvidia defines the user configuration of
                              Nvidia specific info
                            type: object
                        type: object
                      labels:
                        items:
                          description: NodeLabel represents a kubernetes node label
                          properties:
                            key:
                              type: string
                            value:
                              type: string
                          required:
                          - key
                          - value
                          type: object
                        type: array
                      name:
                        type: string
                      taints:
                        items:
                          description: NodeTaint represents a kubernetes taint to
                            be applied to a node
                          properties:
                            effect:
                              type: string
                            key:
                              type: string
                            value:
                              type: string
                          required:
                          - effect
                          - key
                          - value
                          type: object
                        type: array
                    required:
                    - name
                    type: object
                  type: array
                osPackages:
                  description: OSPackages configures the installation of linux package
                    and related properties
                  properties:
                    enableAdditionalRepositories:
                      type: boolean
                  type: object
                version:
                  type: string
              type: object
            inventoryRef:
              description: LocalObjectReference contains enough information to let
                you locate the referenced object inside the same namespace.
              properties:
                name:
                  description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    TODO: Add other useful fields. apiVersion, kind, uid?'
                  type: string
              type: object
            provisioner:
              description: ClusterProvisionerSpec is the spec that contains the provisioner
                options
              properties:
                aws:
                  description: AWSProviderOptions describes AWS provider related options
                  properties:
                    availabilityZones:
                      items:
                        type: string
                      type: array
                    elb:
                      description: ELB contains details for the kube-apiserver ELB
                      properties:
                        internal:
                          type: boolean
                        subnetIDs:
                          items:
                            type: string
                          type: array
                      type: object
                    region:
                      type: string
                    tags:
                      additionalProperties:
                        type: string
                      type: object
                    vpc:
                      description: VPC contains the vpc information required if using
                        an existing vpc
                      properties:
                        ID:
                          type: string
                        enableInternetGateway:
                          type: boolean
                        enableVPCEndpoints:
                          type: boolean
                        internetGatewayID:
                          type: string
                        overrideDefaultRouteTable:
                          type: boolean
                        routeTableID:
                          type: string
                      type: object
                  type: object
                azure:
                  description: AzureProviderOptions describes azure provider related
                    options
                  properties:
                    availabilitySet:
                      description: AvailabilitySet contains the availability_set information
                      properties:
                        faultDomainCount:
                          format: int32
                          type: integer
                        updateDomainCount:
                          format: int32
                          type: integer
                      type: object
                    loadbalancer:
                      description: LoadBalancer contains details for the kube-apiserver
                        LoadBalancer
                      properties:
                        internal:
                          type: boolean
                      type: object
                    location:
                      type: string
                    tags:
                      additionalProperties:
                        type: string
                      type: object
                    vnet:
                      description: VNET contains the virtual network information required
                        if using an existing virtual network
                      properties:
                        name:
                          type: string
                        resourceGroup:
                          type: string
                        routeTable:
                          type: string
                      type: object
                  type: object
                docker:
                  description: DockerProviderOptions describes Docker provider related
                    options
                  properties:
                    controlPlaneMappedPortBase:
                      format: int32
                      type: integer
                    dedicatedNetwork:
                      type: boolean
                    disablePortMapping:
                      type: boolean
                    sshControlPlaneMappedPortBase:
                      format: int32
                      type: integer
                    sshWorkerMappedPortBase:
                      format: int32
                      type: integer
                  type: object
                nodePools:
                  items:
                    description: MachinePool used by the provisioner to configure
                      a machine
                    properties:
                      bastion:
                        type: boolean
                      controlPlane:
                        type: boolean
                      count:
                        format: int32
                        type: integer
                      machine:
                        description: Machine used by the provisioner to configure
                          a machine
                        properties:
                          aws:
                            description: AWSMachineOpts is aws specific options for
                              machine
                            properties:
                              iam:
                                description: IAM contains role information to use
                                  instead of creating one
                                properties:
                                  instanceProfile:
                                    properties:
                                      arn:
                                        type: string
                                      name:
                                        type: string
                                    type: object
                                type: object
                              subnetIDs:
                                items:
                                  type: string
                                type: array
                            type: object
                          azure:
                            description: AzureMachineOpts is azure specific options
                              for machine
                            properties:
                              subnetIDs:
                                items:
                                  type: string
                                type: array
                            type: object
                          imageID:
                            type: string
                          imageName:
                            type: string
                          imagefsVolumeDevice:
                            type: string
                          imagefsVolumeEnabled:
                            type: boolean
                          imagefsVolumeSize:
                            format: int64
                            type: integer
                          imagefsVolumeType:
                            type: string
                          rootVolumeIOPS:
                            format: int32
                            type: integer
                          rootVolumeSize:
                            format: int64
                            type: integer
                          rootVolumeType:
                            type: string
                          type:
                            type: string
                        type: object
                      name:
                        type: string
                    required:
                    - count
                    - name
                    type: object
                  type: array
                provider:
                  type: string
                sshCredentials:
                  description: SSHCredentials describes the options passed to the
                    provisioner regarding the ssh keys
                  properties:
                    privateKeyFile:
                      type: string
                    publicKeyFile:
                      type: string
                    user:
                      type: string
                  required:
                  - publicKeyFile
                  - user
                  type: object
                version:
                  type: string
              required:
              - provider
              type: object
            upgradeStrategy:
              type: string
          required:
          - cloudProviderAccountRef
          - cluster
          - provisioner
          type: object
        status:
          description: KonvoyClusterStatus defines the observed state of KonvoyCluster
          properties:
            adminConfSecretRef:
              description: AdminConfSecretRef holds a reference to the admin conf
                secret when it is available.
              properties:
                name:
                  description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    TODO: Add other useful fields. apiVersion, kind, uid?'
                  type: string
              type: object
            phase:
              description: Phase represents the current phase of Konvoy cluster actuation.
                E.g. Pending, Provisioning, Provisioned, Deleting, Failed, etc.
              type: string
          type: object
      type: object
  version: v1beta1
  versions:
  - name: v1beta1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
